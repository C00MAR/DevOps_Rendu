  

# Application Todo - Architecture Cloud DevOps
Plateforme de gestion de t√¢ches en utilisant une architecture moderne avec React, Node.js et une infrastructure AWS automatis√©e, containerisation Docker avec un d√©ploiement continu via GitHub Actions.


## üéØ Vue d'ensemble

Cette application Todo d√©montre l'impl√©mentation d'une stack DevOps en int√©grant :

* **Application React TypeScript** : Interface responsive avec design moderne et dark mode
* **API Node.js Express** : Backend REST connect√© √† DynamoDB pour la persistance
* **Infrastructure Terraform** : Provisioning automatis√© d'une infrastructure AWS compl√®te
* **Automatisation GitHub Actions** : Pipeline d'int√©gration et d√©ploiement continus
* **Conteneurisation Docker** : Images optimis√©es pour d√©veloppement et production
* **Supervision CloudWatch** : Monitoring complet avec m√©triques et alertes
* **S√©curit√© int√©gr√©e** : Configuration IAM, headers s√©curis√©s, et registre ECR priv√©

  

### Fonctionnalit√©s applicatives

 - **Gestion compl√®te des t√¢ches :** Cr√©ation, modification, suppression et
   marquage comme termin√©
 - **Interface utilisateur moderne** : Th√®me sombre avec animations fluides
   et responsive design
 - **√âdition instantan√©e :** Modification des t√¢ches directement dans
   l'interface
 - **Dashboard en temps r√©el** : Statistiques visuelles (total, actives,
   termin√©es)
 - **Experience mobile :** Interface adapt√©e √† tous les √©crans
 - **Sant√© applicative :** Endpoints de monitoring int√©gr√©s
 - **R√©silience :** Gestion automatique des erreurs avec retry et feedback
   utilisateur


## üèóÔ∏è Architecture

    Frontend React/TypeScript ‚Üí Nginx (Port 80)
    ‚Üì
    Backend Node.js/Express ‚Üí Port 5001
    ‚Üì
    Amazon DynamoDB

**Stack AWS d√©ploy√©e :**

-   **EC2** : Instance t2.micro avec Amazon Linux 2023 et Docker
-   **DynamoDB** : Base NoSQL avec facturation √† l'usage
-   **ECR** : Registre Docker priv√© pour les images applicatives
-   **VPC** : R√©seau virtuel avec subnet public et r√®gles de s√©curit√©
-   **CloudWatch** : Centralisation des logs, m√©triques et dashboards
-   **IAM** : Gestion des acc√®s avec r√¥les sp√©cialis√©s

![Architecture Todo App](architecture.png)

## üìã Pr√©requis

### Comptes requis
-   **Compte AWS** actif avec acc√®s Free Tier
-   **Repository GitHub** pour h√©berger le code et les workflows
-   **Cl√© SSH AWS** cr√©√©e et nomm√©e `todo-app-key`

### Installation des outils

```bash
# Installation AWS CLI v2
curl "https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip" -o "awscliv2.zip"
unzip awscliv2.zip
sudo ./aws/install

# Installation Terraform
wget https://releases.hashicorp.com/terraform/1.6.0/terraform_1.6.0_linux_amd64.zip
unzip terraform_1.6.0_linux_amd64.zip
sudo mv terraform /usr/local/bin/

# Installation Docker et Docker Compose
sudo apt update
sudo apt install docker.io docker-compose-plugin
sudo usermod -aG docker $USER

# Installation Node.js 18 LTS
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt-get install -y nodejs

# Installation Git
sudo apt install git
```

### Configuration initiale AWS

```bash
# Configuration des credentials AWS
aws configure
# Entrez vos informations :
# AWS Access Key ID: [votre-access-key]
# AWS Secret Access Key: [votre-secret-key]  
# Default region name: eu-west-1
# Default output format: json

# V√©rification de la configuration
aws sts get-caller-identity

# Cr√©ation d'un VPC par d√©faut si n√©cessaire
aws ec2 create-default-vpc --region eu-west-1
```


## üöÄ Installation rapide

### 1. R√©cup√©ration du projet

```bash
# Clonage du repository
git clone <repository-url>
cd todo-app

# V√©rification de la structure du projet
ls -la
# Doit contenir : client/ server/ infrastructure/ scripts/ docker-compose.yml
```

### 2. Configuration GitHub Secrets

| Nom du Secret | Valeur | Description |
|---------------|--------|-------------|
| `AWS_ACCESS_KEY_ID` | Votre AWS Access Key | Identifiant pour l'acc√®s AWS |
| `AWS_SECRET_ACCESS_KEY` | Votre AWS Secret Key | Cl√© secr√®te pour l'authentification AWS |
| `AWS_ACCOUNT_ID` | Votre num√©ro de compte AWS | Requis pour l'acc√®s ECR |
| `EC2_HOST` | IP publique de l'instance EC2 | Adresse pour le d√©ploiement SSH |
| `EC2_SSH_PRIVATE_KEY` | Contenu de la cl√© priv√©e SSH | Cl√© compl√®te pour la connexion EC2 |

### 3. D√©clenchement du d√©ploiement

```bash
# Cr√©ation d'une branche pour le d√©ploiement
git checkout -b deploy

# Ajout et commit des modifications
git add .
git commit -m "Configuration pour d√©ploiement automatique"
git push --set-upstream origin deploy

# Cr√©ation d'une Pull Request vers main dans GitHub
# Le pipeline GitHub Actions d√©marre automatiquement le d√©ploiement !
```

## üíª D√©veloppement local

### D√©marrage automatis√©

```bash
# Lancement de l'environnement de d√©veloppement complet
./scripts/dev-start.sh

# Lancement avec reconstruction des images
./scripts/dev-start.sh --build
```

### D√©marrage manuel avec Docker Compose

```bash
# D√©marrage de tous les services
docker compose up -d

# Suivi des logs en temps r√©el
docker compose logs -f

# Arr√™t propre de tous les services
docker compose down
```

### Points d'acc√®s en d√©veloppement

-   **Frontend React Dev** : http://localhost:3000 (avec hot reload)
-   **API Backend** : http://localhost:5001
-   **DynamoDB Local** : http://localhost:8000
-   **DynamoDB Admin UI** : http://localhost:8001

### Ex√©cution des tests

```bash
# Tests du frontend avec React Testing Library
cd client
npm test

# Tests avec rapport de couverture
npm test -- --coverage

# Tests du backend (Jest configur√©)
cd server
npm test
```


## ‚òÅÔ∏è D√©ploiement sur AWS

### M√©thode 1 : D√©ploiement automatis√© (Recommand√©)

1.  **Configurez les secrets GitHub** selon la section Installation rapide
2.  **Cr√©ez une Pull Request vers la branche main**
3.  **GitHub Actions g√®re automatiquement** le provisioning infrastructure et le d√©ploiement applicatif

### M√©thode 2 : D√©ploiement manuel √©tape par √©tape

#### √âtape 1 : Provisioning de l'infrastructure

```bash
cd infrastructure

# Initialisation du workspace Terraform
terraform init

# Pr√©visualisation des ressources √† cr√©er
terraform plan

# Cr√©ation de l'infrastructure AWS
terraform apply
# Confirmez en tapant 'yes'

# R√©cup√©ration des informations de d√©ploiement
terraform output
```

#### √âtape 2 : Construction et publication des images Docker

```bash
# Retour √† la racine du projet
cd ..

# Construction et push vers ECR
./scripts/build-images.sh --push
```

#### √âtape 3 : D√©ploiement applicatif

```bash
# D√©ploiement standard
./scripts/deploy.sh

# D√©ploiement complet avec monitoring
./scripts/deploy-complete.sh
```

### R√©cup√©ration des URLs d'acc√®s

```bash
cd infrastructure
terraform output app_urls
```

## üîÑ Pipeline CI/CD

Le workflow GitHub Actions s'ex√©cute automatiquement en 3 √©tapes s√©quentielles :

### 1. **Phase de Tests** (Job: test)

```yaml
- R√©cup√©ration du code source depuis GitHub
- Configuration Node.js 18 avec optimisation du cache npm
- Ex√©cution des tests frontend React avec couverture de code
- Installation et v√©rification des d√©pendances backend
- ‚ùå Arr√™t du pipeline en cas d'√©chec des tests

```

### 2. **Construction et Publication** (Job: build-and-push)

```yaml
- Construction des images Docker pour client et server
- Authentification et push vers Amazon ECR
- √âtiquetage des images avec le tag 'latest'

```

### 3. **D√©ploiement Production** (Job: deploy)

```yaml
- Connexion SSH s√©curis√©e vers l'instance EC2
- G√©n√©ration dynamique du fichier docker-compose.yml production
- T√©l√©chargement des nouvelles images depuis ECR
- Red√©marrage des services sans downtime
- Validation automatique via health checks

```

### √âv√©nements de d√©clenchement

-   **Push de code** vers les branches `main` ou `master`
-   **Pull Requests** ciblant les branches `main` ou `master`

### Monitoring de l'ex√©cution

-   Consultez l'onglet **Actions** de votre repository GitHub pour suivre l'avancement
-   Les URLs d'acc√®s √† l'application sont affich√©es dans les logs de fin de d√©ploiement

## üõ†Ô∏è Scripts utiles

### Scripts de d√©veloppement

```bash
# Gestion de l'environnement de d√©veloppement
./scripts/dev-start.sh              # D√©marrage des services d√©veloppement
./scripts/dev-start.sh --build      # D√©marrage avec reconstruction compl√®te

# Gestion des images Docker
./scripts/build-images.sh           # Construction locale des images
./scripts/build-images.sh --push    # Construction et publication vers ECR

```

### Scripts de d√©ploiement

```bash
# Options de d√©ploiement
./scripts/deploy.sh                 # D√©ploiement rapide sur EC2 existant
./scripts/deploy-complete.sh        # D√©ploiement avec provisioning Terraform complet

```

### Commandes Docker fr√©quentes

```bash
# Gestion des conteneurs
docker compose ps                   # √âtat des conteneurs
docker compose logs -f              # Logs en temps r√©el de tous les services
docker compose logs client          # Logs sp√©cifiques au frontend
docker compose logs server          # Logs sp√©cifiques au backend

# Op√©rations sur les services
docker compose restart client       # Red√©marrage du frontend uniquement
docker compose restart server       # Red√©marrage du backend uniquement
docker compose up --build -d        # Reconstruction et red√©marrage complet

# Maintenance et nettoyage
docker image prune -f               # Suppression des images inutilis√©es
docker system prune -f              # Nettoyage complet du syst√®me Docker

```

### Commandes AWS courantes

```bash
# Authentification ECR
aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 135808930620.dkr.ecr.eu-west-1.amazonaws.com

# Gestion des images ECR
aws ecr list-images --repository-name todo-app-client --region eu-west-1
aws ecr list-images --repository-name todo-app-server --region eu-west-1

# Acc√®s SSH √† l'instance EC2
ssh -i ~/.ssh/todo-app-key.pem ec2-user@<ADRESSE_IP_PUBLIQUE>

# Consultation des m√©triques CloudWatch
aws cloudwatch get-metric-statistics \
  --namespace "TodoApp/API" \
  --metric-name "RequestCount" \
  --start-time 2024-01-01T00:00:00Z \
  --end-time 2024-01-02T00:00:00Z \
  --period 3600 \
  --statistics Sum \
  --region eu-west-1

```


## üìä Monitoring et surveillance

### Dashboard CloudWatch

Acc√©dez aux tableaux de bord via les outputs Terraform :

```bash
cd infrastructure
terraform output monitoring_urls

```

**M√©triques monitored en temps r√©el :**

-   **Infrastructure EC2** : Utilisation CPU, trafic r√©seau entrant/sortant, utilisation m√©moire
-   **Base DynamoDB** : Consommation unit√©s de lecture/√©criture, latence des requ√™tes
-   **Application** : Nombre de requ√™tes, taux d'erreur, temps de r√©ponse moyen

### Gestion des logs CloudWatch

```bash
# Listing des groupes de logs disponibles
aws logs describe-log-groups --region eu-west-1

# Suivi en temps r√©el des logs applicatifs
aws logs tail /aws/todo-app/server --follow --region eu-west-1
aws logs tail /aws/todo-app/client --follow --region eu-west-1

```

### Syst√®me d'alertes automatiques

-   **Alerte CPU √©lev√©** : D√©clench√©e si CPU > 80% sur 2 mesures cons√©cutives
-   **Alerte erreurs API** : D√©clench√©e si erreurs > 5 dans une fen√™tre de 5 minutes
-   **Notifications SNS** : Configurables pour recevoir les alertes par email/SMS

### Endpoints de sant√©

```bash
# V√©rification sant√© de l'API
curl http://<ADRESSE_IP_PUBLIQUE>:5001/health

# R√©cup√©ration des m√©triques applicatives
curl http://<ADRESSE_IP_PUBLIQUE>:5001/metrics

# Test d'accessibilit√© du frontend
curl http://<ADRESSE_IP_PUBLIQUE>

```

### Consultation des logs sur l'instance

```bash
# Connexion directe √† l'instance EC2
ssh -i ~/.ssh/todo-app-key.pem ec2-user@<ADRESSE_IP_PUBLIQUE>

# Navigation vers le r√©pertoire applicatif
cd /home/ec2-user/todo-app
docker compose logs -f

# Consultation des logs syst√®me Docker
sudo journalctl -u docker -f

```


## üîß D√©pannage

### Probl√®mes fr√©quents et solutions

#### √âchec du pipeline GitHub Actions

```bash
# V√©rification des secrets GitHub
# Aller dans Settings ‚Üí Secrets and variables ‚Üí Actions

# Probl√®me d'authentification ECR
# Contr√¥ler la valeur de AWS_ACCOUNT_ID dans les secrets

# Erreur de connexion SSH
# V√©rifier EC2_SSH_PRIVATE_KEY et EC2_HOST dans les secrets

```

#### Services non fonctionnels sur EC2

```bash
# Connexion √† l'instance pour diagnostic
ssh -i ~/.ssh/todo-app-key.pem ec2-user@<ADRESSE_IP>

# V√©rification du statut Docker
sudo systemctl status docker
sudo systemctl start docker

# Contr√¥le de la pr√©sence des images
docker images

# Reconstruction des services
cd /home/ec2-user/todo-app
docker compose down
docker compose pull
docker compose up -d

```

#### Probl√®mes de connectivit√© API

```bash
# V√©rification des ports en √©coute
netstat -tlnp | grep :5001

# Validation des security groups AWS
aws ec2 describe-security-groups --group-ids <ID_SECURITY_GROUP>

# Analyse des logs backend
docker compose logs server

```

#### Erreurs d'acc√®s DynamoDB

```bash
# V√©rification des politiques IAM attach√©es
aws iam list-attached-role-policies --role-name todo-app-ec2-role

# Test direct d'acc√®s √† DynamoDB
aws dynamodb list-tables --region eu-west-1

```

### Commandes de diagnostic avanc√©

```bash
# Diagnostic complet du syst√®me (inclus dans le script de d√©ploiement)
./scripts/deploy.sh

# √âtat d√©taill√© de l'infrastructure Terraform
cd infrastructure
terraform show
terraform refresh

# Tests de sant√© complets des services
curl -f http://<ADRESSE_IP>/health && echo "‚úÖ Frontend op√©rationnel"
curl -f http://<ADRESSE_IP>:5001/health && echo "‚úÖ Backend op√©rationnel"

```

### Proc√©dure de reconstruction compl√®te

```bash
# 1. Destruction de l'infrastructure existante
cd infrastructure
terraform destroy
# Confirmer avec 'yes'

# 2. Recr√©ation compl√®te de l'infrastructure
terraform apply
# Confirmer avec 'yes'

# 3. Red√©ploiement de l'application
cd ..
./scripts/deploy.sh

```


## üìÅ Structure du projet

```
DevOps_Rendu/
‚îú‚îÄ‚îÄ .github/
‚îÇ   ‚îî‚îÄ‚îÄ workflows/
‚îÇ       ‚îî‚îÄ‚îÄ deploy.yml              # Workflow d'int√©gration et d√©ploiement continus
‚îú‚îÄ‚îÄ client/                         # Application frontend React TypeScript
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/             # Composants React r√©utilisables
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AddTodoForm.tsx     # Formulaire d'ajout de t√¢ches
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TodoItem.tsx        # Composant d'affichage et √©dition d'une t√¢che
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ TodoList.tsx        # Liste des t√¢ches avec statistiques
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ useTodos.ts         # Hook personnalis√© pour la gestion d'√©tat
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ todoService.ts      # Client pour les appels API REST
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ types/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Todo.ts             # Interfaces TypeScript
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ App.tsx                 # Composant principal de l'application
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.tsx               # Point d'entr√©e React
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile                  # Image Docker production (React build + Nginx)
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile.dev              # Image Docker d√©veloppement (dev server)
‚îÇ   ‚îú‚îÄ‚îÄ nginx.conf                  # Configuration du serveur web Nginx
‚îÇ   ‚îú‚îÄ‚îÄ package.json                # D√©pendances et scripts npm
‚îÇ   ‚îî‚îÄ‚îÄ tailwind.config.js          # Configuration du framework CSS
‚îú‚îÄ‚îÄ server/                         # API backend Node.js Express
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ middleware/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ metrics.js          # Middleware de collecte de m√©triques CloudWatch
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.js                # Serveur Express avec routes API
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile                  # Image Docker production
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile.dev              # Image Docker d√©veloppement (avec nodemon)
‚îÇ   ‚îú‚îÄ‚îÄ package.json                # D√©pendances Node.js et scripts
‚îÇ   ‚îî‚îÄ‚îÄ jest.config.js              # Configuration du framework de tests
‚îú‚îÄ‚îÄ infrastructure/                 # Infrastructure as Code avec Terraform
‚îÇ   ‚îú‚îÄ‚îÄ main.tf                     # D√©finition des ressources AWS principales
‚îÇ   ‚îú‚îÄ‚îÄ variables.tf                # Variables param√©trables du projet
‚îÇ   ‚îú‚îÄ‚îÄ outputs.tf                  # Sorties (adresses IP, URLs, ARNs)
‚îÇ   ‚îú‚îÄ‚îÄ providers.tf                # Configuration des providers AWS
‚îÇ   ‚îú‚îÄ‚îÄ observability.tf            # Configuration CloudWatch et monitoring
‚îÇ   ‚îú‚îÄ‚îÄ user-data.sh                # Script d'initialisation de l'instance EC2
‚îÇ   ‚îî‚îÄ‚îÄ terraform.tfvars.example    # Exemple de fichier de variables
‚îú‚îÄ‚îÄ scripts/                        # Scripts d'automatisation et utilitaires
‚îÇ   ‚îú‚îÄ‚îÄ build-images.sh             # Construction et publication des images Docker
‚îÇ   ‚îú‚îÄ‚îÄ deploy.sh                   # Script de d√©ploiement rapide
‚îÇ   ‚îú‚îÄ‚îÄ deploy-complete.sh          # Script de d√©ploiement avec provisioning complet
‚îÇ   ‚îî‚îÄ‚îÄ dev-start.sh                # D√©marrage de l'environnement de d√©veloppement
‚îú‚îÄ‚îÄ docker-compose.yml              # Configuration Docker Compose pour d√©veloppement
‚îú‚îÄ‚îÄ docker-compose.prod.yml         # Configuration production (auto-g√©n√©r√©e par CI/CD)
‚îî‚îÄ‚îÄ README.md                       # Documentation compl√®te du projet

```

## üî¨ Techno et frameworks

### Couche frontend

-   **React 19** avec int√©gration TypeScript pour le typage statique
-   **Tailwind CSS** pour le design system avec th√®me sombre personnalis√©
-   **Create React App** comme base de d√©veloppement
-   **React Testing Library** pour les tests de composants
-   **Nginx** comme serveur web pour la production

### Couche backend

-   **Node.js 18 LTS** avec le framework Express
-   **AWS SDK** pour l'int√©gration native avec DynamoDB
-   **Middleware CORS** pour la gestion des requ√™tes cross-origin
-   **Collecteurs de m√©triques** personnalis√©s pour CloudWatch

### Infrastructure cloud

-   **Terraform** pour la gestion d√©clarative de l'infrastructure
-   **AWS EC2** instance t2.micro avec Amazon Linux 2023
-   **AWS DynamoDB** avec mode de facturation PAY_PER_REQUEST
-   **AWS ECR** comme registre Docker priv√© et s√©curis√©
-   **AWS CloudWatch** pour les logs, m√©triques et alertes
-   **AWS IAM** avec r√¥les et politiques granulaires

### Cha√Æne DevOps

-   **Docker** avec strat√©gie multi-stage pour l'optimisation des images
-   **GitHub Actions** pour l'automatisation CI/CD
-   **SSH** pour le d√©ploiement s√©curis√© sur les instances
-   **Health checks** automatis√©s pour la validation du d√©ploiement

## üîê S√©curit√©

### Gestion des acc√®s

-   **R√¥les IAM** configur√©s avec le principe du moindre privil√®ge
-   **Instance Profile** pour l'acc√®s s√©curis√© aux services AWS sans cl√©s hardcod√©es
-   **ECR priv√©** avec analyse automatique des vuln√©rabilit√©s

### S√©curisation r√©seau

-   **Security Groups** avec r√®gles restrictives (ports 22, 80, 5001 uniquement)
-   **VPC d√©di√©** avec isolation du trafic r√©seau
-   **Headers de s√©curit√©** complets dans Nginx (CSP, HSTS, X-Frame-Options)

### Protection des donn√©es

-   **DynamoDB** avec chiffrement automatique au repos
-   **GitHub Secrets** pour la gestion s√©curis√©e des credentials
-   **Aucun secret** expos√© dans le code source ou les logs


----------

**D√©veloppeur** : Marc MOUREAU, Thomas DORET-GAISSET, Marvin CLERC, Ambre KOUITINI 
**Projet** : Todo App Cloud DevOps  
**Technologies** : React, Node.js, AWS, Terraform, Docker, GitHub Actions  


